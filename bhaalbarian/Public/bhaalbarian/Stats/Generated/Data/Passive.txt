new entry "KHB_HematocriticRage_Unlock"
type "PassiveData"
data "DisplayName" "KHB_HematocriticRage_DisplayName;1"
data "Description" "KHB_HematocriticRage_Description;1"
data "Icon" "Action_Barbarian_Rage"
data "Boosts" "UnlockSpell(KHB_Shout_HematocriticRage)"

new entry "KHB_BloodVitality_Passive"
type "PassiveData"
data "Icon" "Action_Mag_Bloodfeeding_ScarletRegeneration"
data "Properties" "Highlighted"
data "DisplayName" "KHB_BloodVitality_DisplayName;2"
data "Description" "KHB_BloodVitality_Description;4"
data "ExtraDescription" "KHB_BloodVitality_ExtraDescription"
data "TooltipDamageList" "RegainHitPoints(1d4+StrengthModifier)"
data "StackId" "KHB_BV_Passive"
data "StackType" "Overwrite"
data "StatsFunctorContext" "OnSurfaceEnter"
data "Conditions" "InSurface('SurfaceBlood',context.Source)"
data "StatsFunctors" "RegainHitPoints(StrengthModifier);GROUND:CreateSurface(1,-1,None)"

new entry "KHB_BloodVitalitySlayer_Passive"
type "PassiveData"
using "KHB_BloodVitality_Passive"
data "StackId" "KHB_BV_Passive"
data "StackType" "Overwrite"
data "TooltipDamageList" "RegainHitPoints(1d4+StrengthModifier)"
data "StatsFunctors" "RegainHitPoints(1d4+StrengthModifier);GROUND:CreateSurface(2,-1,None)"

new entry "KHB_BloodVitalitySlayer12_Passive"
type "PassiveData"
using "KHB_BloodVitality_Passive"
data "StackId" "KHB_BV_Passive"
data "StackType" "Overwrite"
data "TooltipDamageList" "RegainHitPoints(2d4+StrengthModifier)"
data "StatsFunctors" "RegainHitPoints(2d4+StrengthModifier);GROUND:CreateSurface(2,-1,None)"

new entry "KHB_BloodBoiling_Passive"
type "PassiveData"
data "DisplayName" "KHB_BloodBoiling_DisplayName;2"
data "Description" "KHB_BloodBoiling_Description;5"
data "DescriptionParams" "DealDamage(1d4+ConstitutionModifier, Fire)"
data "Icon" "GenericIcon_DamageType_Fire"
data "Properties" "IsToggled;Highlighted;ToggledDefaultAddToHotbar"
data "Boosts" "IF(IsMeleeUnarmedAttack()):DamageBonus(1d4+ConstitutionModifier, Fire)"

new entry "KHB_HematophagicResorber_Passive"
type "PassiveData"
data "DisplayName" "KHB_Resorber_DisplayName;2"
data "Description" "KHB_Resorber_Description;5"
data "Icon" "Spell_Abjuration_Resistance"
data "Properties" "Highlighted"
data "Conditions" "HasStatus(SG_Rage)"
data "Boosts" "Resistance(Bludgeoning, Resistant);Resistance(Piercing, Resistant);Resistance(Force, Resistant)"

new entry "KHB_HematophagicResorber2_Passive"
type "PassiveData"
data "DisplayName" "KHB_Resorber_DisplayName;2"
data "Description" "KHB_Resorber_Description;5"
data "Icon" "Spell_Abjuration_Resistance"
data "Properties" "Highlighted"
data "Conditions" "HasStatus(SG_Rage)"
data "Boosts" "Resistance(Bludgeoning, Resistant);Resistance(Piercing, Resistant);Resistance(Slashing, Resistant);Resistance(Force, Resistant);Resistance(Poison, Immune);Resistance(Fire, Immune);StatusImmunity(FEARED)"

new entry  "KHB_Umbrapaxic_Passive"
type "PassiveData"
data "DisplayName" "KHB_Umbrapaxic_DisplayName;2"
data "Description" "KHB_Umbrapaxic_Description;8"
data "ExtraDescription" "KHB_Umbrapaxic_ExtraDescription"
data "DescriptionParams" "2"
data "Properties" "Highlighted"
data "Icon" "Action_Quasit_Invisibility"
data "StatsFunctorContext" "OnDamage"
data "Conditions" "Enemy() and IsKillingBlow()"
data "StatsFunctors" "ApplyStatus(SWAP, INVISIBILITY, 100, 2)"

new entry  "KHB_Unlock_UmbrapaxicIntent"
type "PassiveData"
data "Properties" "Hidden"
data "Boosts" "UnlockSpell(KHB_Shout_UmbrapaxicIntent);UnlockSpell(KHB_Shout_UmbrapaxicIntent_Dismiss)"

new entry "KHB_SanguineCritical_Passive"
type "PassiveData"
data "DisplayName" "KHB_SanguineCritical_DisplayName;2"
data "Description" "KHB_SanguineCritical_Description;4"
data "DescriptionParams" "1;2"
data "Icon" "PassiveFeature_BrutalCritical"
data "Properties" "Highlighted"
data "Conditions" "HasDamageEffectFlag(DamageFlags.Critical) and not (IsCriticalMiss() or IsMiss())"
data "BoostConditions" "HasDamageEffectFlag(DamageFlags.Critical) and not (IsCriticalMiss() or IsMiss())"
data "StatsFunctorContext" "OnAttack"
data "StatsFunctors" "ApplyStatus(KHB_Arterial_Rupture,100,2)"
data "Boosts" "DealDamage(1d4+ProficiencyBonus, Slashing);IF(CharacterLevelGreaterThan(11) and IsKillingBlow()):RestoreResource(ActionPoint, 1, 0)"

new entry "KHB_AllClottedUp_Passive"
type "PassiveData"
data "DisplayName" "KHB_AllClottedUp_DisplayName;2"
data "Description" "KHB_AllClottedUp_Description;5"
data "DescriptionParams" "12"
data "Icon" "PassiveFeature_UnarmoredDefense_Barbarian"
data "Properties" "Highlighted"
data "BoostContext" "OnEquip;OnCreate"
data "BoostConditions" "not HasShieldEquipped(context.Source)"
data "Boosts" "ACOverrideFormula(12,true,Strength,Constitution)"

new entry "KHB_Unlock_RaggedClaws_Passive"
type "PassiveData"
data "Properties" "Hidden"
data "Boosts" "UnlockSpell(KHB_RaggedClaws_Attack)"

new entry "KHB_Unlock_RaggedierClaws_Passive"
type "PassiveData"
data "DisplayName" "KHB_RaggedierClaws_DisplayName;2"
data "Description" "KHB_RaggedierClaws_Description;4"
data "Icon" "Action_Quasit_Claws"
data "Properties" "Hidden"
data "Boosts" "IF(IsMeleeUnarmedAttack()):DamageBonus(StrengthModifier*2,Slashing);UnlockSpellVariant(MeleeUnarmedAttackCheck(),ModifyTargetRadius(Multiplicative,1.3));IgnoreResistance(Slashing,Resistant);IgnoreResistance(Slashing,Immune)"

new entry "KHB_Unlock_Bloodcurdler"
type "PassiveData"
data "Properties" "Hidden"
data "Boosts" "UnlockSpell(KHB_Zone_Bloodcurdler)"

new entry "KHB_Unlock_RupturingLeap"
type "PassiveData" 
data "Properties" "Hidden"
data "Boosts" "UnlockSpell(KHB_Jump_RupturingLeap)"

new entry "KHB_Unlock_Hearteater"
type "PassiveData"
data "Properties" "Hidden"
data "Boosts" "UnlockSpell(KHB_Hearteater_Attack)"

new entry "KHB_BleedingEdge_Unlock"
type "PassiveData"
data "DisplayName" "h86a825dagb852g4f68g847cg41fcba245fa6;1"
data "Description" "hcd48bb13g269ag4acbgb58dgdc55a5c6e49c;1"
data "Icon" "Action_Barbarian_RecklessAttack"
data "Boosts" "UnlockInterrupt(KHB_Interrupt_BleedingEdge);UnlockSpell(KHB_Shout_BleedingEdge)"
data "StatsFunctorContext" "OnAttack"
data "Conditions" "IsWeaponAttack()"
data "StatsFunctors" "ApplyStatus(SELF,FIRST_ATTACK_TURN,100,1)"

new entry "KHB_Unlock_SlayerForm_6_Passive"
type "PassiveData"
data "DisplayName" "KHB_HearteaterSlayer_DisplayName;2"
data "Description" "KHB_HearteaterSlayer_Description;4"
data "Icon" "Action_DarkUrge"
data "Properties" "Hidden"
data "Boosts" "UnlockSpell(KHB_Shout_HearteaterSlayer_6)"

new entry "KHB_Unlock_SlayerForm_12_Passive"
type "PassiveData"
using "KHB_Unlock_SlayerForm_6_Passive"
data "Boosts" "UnlockSpell(KHB_Shout_HearteaterSlayer_12)"

new entry "KHB_Unlock_SlayerForm_Dismiss_Passive"
type "PassiveData"
data "DisplayName" "KHB_HearteaterSlayerDismiss_DisplayName;2"
using "KHB_Unlock_SlayerForm_6_Passive"
data "Boosts" "UnlockSpell(KHB_Shout_HearteaterSlayer_Dismiss)"

new entry "KHB_GiveMeYourBloodlv3_Passive"
type "PassiveData"
data "DisplayName" "KHB_GiveMeYourBlood_DisplayName;2"
data "Description" "KHB_GiveMeYourBlood_Description;4"
data "DescriptionParams" "1"
data "Properties" "Highlighted"
data "Icon" "Action_Monster_Slayer_Bloodbath"
data "Boosts" "ReduceCriticalAttackThreshold(1)"

new entry "KHB_GiveMeYourBloodlv6_Passive"
type "PassiveData"
data "DisplayName" "KHB_GiveMeYourBlood_DisplayName;2"
data "Description" "KHB_GiveMeYourBlood_Description;4"
data "DescriptionParams" "2"
data "Properties" "Highlighted"
data "Icon" "Action_Monster_Slayer_Bloodbath"
data "Boosts" "ReduceCriticalAttackThreshold(3)"

new entry "KHB_GiveMeYourBloodlv9_Passive"
type "PassiveData"
data "DisplayName" "KHB_GiveMeYourBlood_DisplayName;2"
data "Description" "KHB_GiveMeYourBlood_Description;4"
data "DescriptionParams" "5"
data "Properties" "Highlighted"
data "Icon" "Action_Monster_Slayer_Bloodbath"
data "Boosts" "ReduceCriticalAttackThreshold(5)"

new entry "KHB_GiveMeYourBloodlv12_Passive"
type "PassiveData"
data "DisplayName" "KHB_GiveMeYourBlood_DisplayName;2"
data "Description" "KHB_GiveMeYourBlood_Description;4"
data "DescriptionParams" "8"
data "Properties" "Highlighted"
data "Icon" "Action_Monster_Slayer_Bloodbath"
data "Boosts" "ReduceCriticalAttackThreshold(8)"